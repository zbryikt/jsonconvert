var fs,json,jsonconvert;fs=require("fs"),json=JSON.parse(fs.readFileSync("sample.json").toString()),jsonconvert={build:function(r){var n,o,t,i,e,f,s,u,a,l,h,c,p;for(Array.isArray(r)||(r=[r]),n={},o=1,t=0,i=r.length;i>t;++t){e=r[t];for(f in e)n[f]||(n[f]=o++)}u=[];for(f in n)u.push(f);for(s=u,o=1,a=[],t=0,i=s.length;i>t;++t)if(f=s[t],a.push([[f],o++]),typeof r[0][f]==typeof{})for(l=this.build(r[0][f]),h=0,c=l.length;c>h;++h)p=l[h],a.push([[f].concat(p[0]),o++]);return a},traverse:function(r,n){var o,t,i,e,f,s=[];for(Array.isArray(n)||(n=[n]),o=0,t=n.length;t>o;++o){i=n[o],e=[];for(f in i);s.push(e)}return s},toCSV:function(r){var n,o,t;n=this.build(r),console.log(n),o={};for(t in n)o[t]="";return this.traverse("",r,o)},findArray:function(r){var n,o,t;if(Array.isArray(r))return r;if(typeof r!=typeof{})return null;for(n in r)if(o=r[n],t=this.findArray(o))return t;return[r]},simpleCSV:function(r){function n(r){return'"'+e[r]+'"'}var o,t,i,e,f,s,u=[];for(r=this.findArray(r),o={},t=0,i=r.length;i>t;++t){e=r[t];for(f in e)o[f]=1}s=[];for(f in o)s.push(f);for(o=s,console.log(o.map(function(r){return'"'+r+'"'}).join(",")),t=0,i=r.length;i>t;++t)e=r[t],u.push(console.log(o.map(n).join(",")));return u}};